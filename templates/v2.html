{% extends "bootstrap/base.html" %}
{% block content %}
{{ codemirror.include_codemirror() }}

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script type="text/javascript">

    function getCode(){

      var code = editor_for_source_code.getValue() //grabs code from CodeMirror

      document.getElementById("run").innerHTML = "Running";

      $.get("http://localhost:5000/run", {'code': code}, function(write){

      document.getElementById("output").innerHTML = write;

      });
    }

  </script>

<h1 class="text-center">Traffic Light Controller V2</h1>
<textarea id="flask-codemirror-source_code" name="source_code"></textarea>
    <script>
        var editor_for_source_code = CodeMirror.fromTextArea(
            document.getElementById('flask-codemirror-source_code'),
              {
        "theme": "3024-night",
        "mode": "python",
        "lineNumbers": "true"
}
        );
    </script>
<button id="run" type="button" class="btn btn-primary btn-lg btn-block" onclick="getCode()">Run</button>

<div class="container">
    <div class="form-group">
      <textarea id="output" class="form-control" rows="5" id="comment" name="text"></textarea>
    </div>
    <h2 class="text-center">OUTPUT</h2>
</div>



{% endblock %}
